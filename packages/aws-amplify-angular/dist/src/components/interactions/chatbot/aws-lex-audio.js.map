{"version":3,"file":"aws-lex-audio.js","sourceRoot":"","sources":["../../../../../src/components/interactions/chatbot/aws-lex-audio.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this\n// software and associated documentation files (the \"Software\"), to deal in the Software\n// without restriction, including without limitation the rights to use, copy, modify,\n// merge, publish, distribute, sublicense, and/or sell copies of the Software, and to\n// permit persons to whom the Software is furnished to do so.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n// INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n// PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n// SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n(function e(t, n, r) {\n  function s(o, u) {\n    if (!n[o]) {\n      if (!t[o]) {\n        var a = typeof require == 'function' && require;\n        if (!u && a) return a(o, !0);\n        if (i) return i(o, !0);\n        var f = new Error(\"Cannot find module '\" + o + \"'\");\n        throw ((f.code = 'MODULE_NOT_FOUND'), f);\n      }\n      var l = (n[o] = { exports: {} });\n      t[o][0].call(\n        l.exports,\n        function (e) {\n          var n = t[o][1][e];\n          return s(n ? n : e);\n        },\n        l,\n        l.exports,\n        e,\n        t,\n        n,\n        r\n      );\n    }\n    return n[o].exports;\n  }\n  var i = typeof require == 'function' && require;\n  for (var o = 0; o < r.length; o++) s(r[o]);\n  return s;\n})(\n  {\n    1: [\n      function (require, module, exports) {\n        (function () {\n          'use strict';\n          var rec = require('./recorder.js');\n          var recorder,\n            audioRecorder,\n            checkAudioSupport,\n            audioSupported,\n            playbackSource,\n            UNSUPPORTED = 'Audio is not supported.';\n\n          /**\n           * Represents an audio control that can start and stop recording,\n           * export captured audio, play an audio buffer, and check if audio\n           * is supported.\n           */\n          exports.audioControl = function (options) {\n            options = options || {};\n            this.checkAudioSupport = options.checkAudioSupport !== false;\n\n            /**\n             * This callback type is called `onSilenceCallback`.\n             *\n             * @callback onSilenceCallback\n             */\n\n            /**\n             * Visualize callback: `visualizerCallback`.\n             *\n             * @callback visualizerCallback\n             * @param {Uint8Array} dataArray\n             * @param {number} bufferLength\n             */\n\n            /**\n             * Clears the previous buffer and starts buffering audio.\n             *\n             * @param {?onSilenceCallback} onSilence - Called when silence is detected.\n             * @param {?visualizerCallback} visualizer - Can be used to visualize the captured buffer.\n             * @param {silenceDetectionConfig} - Specify custom silence detection values.\n             * @throws {Error} If audio is not supported.\n             */\n            var startRecording = function (\n              onSilence,\n              visualizer,\n              silenceDetectionConfig\n            ) {\n              onSilence =\n                onSilence ||\n                function () {\n                  /* no op */\n                };\n              visualizer =\n                visualizer ||\n                function () {\n                  /* no op */\n                };\n              audioSupported = audioSupported !== false;\n              if (!audioSupported) {\n                throw new Error(UNSUPPORTED);\n              }\n              const context = audioRecorder.audioContext();\n              context.resume().then(() => {\n                recorder = audioRecorder.createRecorder(silenceDetectionConfig);\n                recorder.record(onSilence, visualizer);\n              });\n            };\n\n            /**\n             * Stops buffering audio.\n             *\n             * @throws {Error} If audio is not supported.\n             */\n            var stopRecording = function () {\n              audioSupported = audioSupported !== false;\n              if (!audioSupported) {\n                throw new Error(UNSUPPORTED);\n              }\n              recorder.stop();\n            };\n\n            /**\n             * On export complete callback: `onExportComplete`.\n             *\n             * @callback onExportComplete\n             * @param {Blob} blob The exported audio as a Blob.\n             */\n\n            /**\n             * Exports the captured audio buffer.\n             *\n             * @param {onExportComplete} callback - Called when the export is complete.\n             * @param {sampleRate} The sample rate to use in the export.\n             * @throws {Error} If audio is not supported.\n             */\n            var exportWAV = function (callback, sampleRate) {\n              audioSupported = audioSupported !== false;\n              if (!audioSupported) {\n                throw new Error(UNSUPPORTED);\n              }\n              if (!(callback && typeof callback === 'function')) {\n                throw new Error('You must pass a callback function to export.');\n              }\n              sampleRate =\n                typeof sampleRate !== 'undefined' ? sampleRate : 16000;\n              recorder.exportWAV(callback, sampleRate);\n              recorder.clear();\n            };\n\n            /**\n             * On playback complete callback: `onPlaybackComplete`.\n             *\n             * @callback onPlaybackComplete\n             */\n\n            /**\n             * Plays the audio buffer with an HTML5 audio tag.\n             * @param {Uint8Array} buffer - The audio buffer to play.\n             * @param {?onPlaybackComplete} callback - Called when audio playback is complete.\n             */\n            var playHtmlAudioElement = function (buffer, callback) {\n              if (typeof buffer === 'undefined') {\n                return;\n              }\n              var myBlob = new Blob([buffer]);\n              var audio = document.createElement('audio');\n              var objectUrl = window.URL.createObjectURL(myBlob);\n              audio.src = objectUrl;\n              audio.addEventListener('ended', function () {\n                audio.currentTime = 0;\n                if (typeof callback === 'function') {\n                  callback();\n                }\n              });\n              audio.play();\n            };\n\n            /**\n             * On playback complete callback: `onPlaybackComplete`.\n             *\n             * @callback onPlaybackComplete\n             */\n\n            /**\n             * Plays the audio buffer with a WebAudio AudioBufferSourceNode.\n             * @param {Uint8Array} buffer - The audio buffer to play.\n             * @param {?onPlaybackComplete} callback - Called when audio playback is complete.\n             */\n            var play = function (buffer, callback) {\n              if (typeof buffer === 'undefined') {\n                return;\n              }\n              var myBlob = new Blob([buffer]);\n              // We'll use a FileReader to create and ArrayBuffer out of the audio response.\n              var fileReader = new FileReader();\n              fileReader.onload = function () {\n                // Once we have an ArrayBuffer we can create our BufferSource and decode the result as an AudioBuffer.\n                playbackSource = audioRecorder\n                  .audioContext()\n                  .createBufferSource();\n                audioRecorder\n                  .audioContext()\n                  .decodeAudioData(this.result, function (buf) {\n                    // Set the source buffer as our new AudioBuffer.\n                    playbackSource.buffer = buf;\n                    // Set the destination (the actual audio-rendering device--your device's speakers).\n                    playbackSource.connect(\n                      audioRecorder.audioContext().destination\n                    );\n                    // Add an \"on ended\" callback.\n                    playbackSource.onended = function (event) {\n                      if (typeof callback === 'function') {\n                        callback();\n                      }\n                    };\n                    // Start the playback.\n                    playbackSource.start(0);\n                  });\n              };\n              fileReader.readAsArrayBuffer(myBlob);\n            };\n\n            /**\n             * Stops the playback source (created by the play method) if it exists. The `onPlaybackComplete`\n             * callback will be called.\n             */\n            var stop = function () {\n              if (typeof playbackSource === 'undefined') {\n                return;\n              }\n              playbackSource.stop();\n            };\n\n            /**\n             * Clear the recording buffer.\n             */\n            var clear = function () {\n              recorder.clear();\n            };\n\n            /**\n             * On audio supported callback: `onAudioSupported`.\n             *\n             * @callback onAudioSupported\n             * @param {boolean}\n             */\n\n            /**\n             * Checks that getUserMedia is supported and the user has given us access to the mic.\n             * @param {onAudioSupported} callback - Called with the result.\n             */\n            var supportsAudio = function (callback) {\n              callback =\n                callback ||\n                function () {\n                  /* no op */\n                };\n              if (\n                navigator.mediaDevices &&\n                navigator.mediaDevices.getUserMedia\n              ) {\n                audioRecorder = rec.audioRecorder();\n                audioRecorder\n                  .requestDevice()\n                  .then(function (stream) {\n                    audioSupported = true;\n                    callback(audioSupported);\n                  })\n                  .catch(function (error) {\n                    audioSupported = false;\n                    callback(audioSupported);\n                  });\n              } else {\n                audioSupported = false;\n                callback(audioSupported);\n              }\n            };\n\n            if (this.checkAudioSupport) {\n              supportsAudio();\n            }\n\n            return {\n              startRecording: startRecording,\n              stopRecording: stopRecording,\n              exportWAV: exportWAV,\n              play: play,\n              stop: stop,\n              clear: clear,\n              playHtmlAudioElement: playHtmlAudioElement,\n              supportsAudio: supportsAudio,\n            };\n          };\n        })();\n      },\n      { './recorder.js': 5 },\n    ],\n    2: [\n      function (require, module, exports) {\n        (function () {\n          'use strict';\n          var AudioControl = require('./control.js').audioControl;\n\n          var DEFAULT_LATEST = '$LATEST';\n          var DEFAULT_CONTENT_TYPE = 'audio/x-l16; sample-rate=16000';\n          var DEFAULT_USER_ID = 'userId';\n          var DEFAULT_ACCEPT_HEADER_VALUE = 'audio/mpeg';\n          var MESSAGES = Object.freeze({\n            PASSIVE: 'Passive',\n            LISTENING: 'Listening',\n            SENDING: 'Sending',\n            SPEAKING: 'Speaking',\n          });\n\n          var lexruntime,\n            audioControl = new AudioControl({ checkAudioSupport: false });\n\n          exports.conversation = function (\n            config,\n            onStateChange,\n            onSuccess,\n            onError,\n            onAudioData\n          ) {\n            var currentState;\n\n            // Apply default values.\n            this.config = applyDefaults(config);\n            this.lexConfig = this.config.lexConfig;\n            this.messages = MESSAGES;\n            onStateChange =\n              onStateChange ||\n              function () {\n                /* no op */\n              };\n            this.onSuccess =\n              onSuccess ||\n              function () {\n                /* no op */\n              };\n            this.onError =\n              onError ||\n              function () {\n                /* no op */\n              };\n            this.onAudioData =\n              onAudioData ||\n              function () {\n                /* no op */\n              };\n\n            // Validate input.\n            if (!this.config.lexConfig.botName) {\n              this.onError('A Bot name must be provided.');\n              return;\n            }\n            if (!AWS.config.credentials) {\n              this.onError('AWS Credentials must be provided.');\n              return;\n            }\n            if (!AWS.config.region) {\n              this.onError('A Region value must be provided.');\n              return;\n            }\n\n            lexruntime = new AWS.LexRuntime();\n\n            this.onSilence = function () {\n              if (config.silenceDetection) {\n                audioControl.stopRecording();\n                currentState.advanceConversation();\n              }\n            };\n\n            this.transition = function (conversation) {\n              currentState = conversation;\n              var state = currentState.state;\n              onStateChange(state.message);\n\n              // If we are transitioning into SENDING or SPEAKING we want to immediately advance the conversation state\n              // to start the service call or playback.\n              if (\n                state.message === state.messages.SENDING ||\n                state.message === state.messages.SPEAKING\n              ) {\n                currentState.advanceConversation();\n              }\n              // If we are transitioning in to sending and we are not detecting silence (this was a manual state change)\n              // we need to do some cleanup: stop recording, and stop rendering.\n              if (\n                state.message === state.messages.SENDING &&\n                !this.config.silenceDetection\n              ) {\n                audioControl.stopRecording();\n              }\n            };\n\n            this.advanceConversation = function () {\n              audioControl.supportsAudio(function (supported) {\n                if (supported) {\n                  currentState.advanceConversation();\n                } else {\n                  onError('Audio is not supported.');\n                }\n              });\n            };\n\n            this.updateConfig = function (newValue) {\n              this.config = applyDefaults(newValue);\n              this.lexConfig = this.config.lexConfig;\n            };\n\n            this.reset = function () {\n              audioControl.clear();\n              currentState = new Initial(currentState.state);\n            };\n\n            currentState = new Initial(this);\n\n            return {\n              advanceConversation: this.advanceConversation,\n              updateConfig: this.updateConfig,\n              reset: this.reset,\n            };\n          };\n\n          var Initial = function (state) {\n            this.state = state;\n            state.message = state.messages.PASSIVE;\n            this.advanceConversation = function () {\n              audioControl.startRecording(\n                state.onSilence,\n                state.onAudioData,\n                state.config.silenceDetectionConfig\n              );\n              state.transition(new Listening(state));\n            };\n          };\n\n          var Listening = function (state) {\n            this.state = state;\n            state.message = state.messages.LISTENING;\n            this.advanceConversation = function () {\n              audioControl.exportWAV(function (blob) {\n                state.audioInput = blob;\n                state.transition(new Sending(state));\n              });\n            };\n          };\n\n          var Sending = function (state) {\n            this.state = state;\n            state.message = state.messages.SENDING;\n            this.advanceConversation = function () {\n              state.lexConfig.inputStream = state.audioInput;\n              lexruntime.postContent(state.lexConfig, function (err, data) {\n                if (err) {\n                  state.onError(err);\n                  state.transition(new Initial(state));\n                } else {\n                  state.audioOutput = data;\n                  state.transition(new Speaking(state));\n                  state.onSuccess(data);\n                }\n              });\n            };\n          };\n\n          var Speaking = function (state) {\n            this.state = state;\n            state.message = state.messages.SPEAKING;\n            this.advanceConversation = function () {\n              if (state.audioOutput.contentType === 'audio/mpeg') {\n                audioControl.play(state.audioOutput.audioStream, function () {\n                  if (\n                    state.audioOutput.dialogState === 'ReadyForFulfillment' ||\n                    state.audioOutput.dialogState === 'Fulfilled' ||\n                    state.audioOutput.dialogState === 'Failed' ||\n                    !state.config.silenceDetection\n                  ) {\n                    state.transition(new Initial(state));\n                  } else {\n                    audioControl.startRecording(\n                      state.onSilence,\n                      state.onAudioData,\n                      state.config.silenceDetectionConfig\n                    );\n                    state.transition(new Listening(state));\n                  }\n                });\n              } else {\n                state.transition(new Initial(state));\n              }\n            };\n          };\n\n          var applyDefaults = function (config) {\n            config = config || {};\n            config.silenceDetection = config.hasOwnProperty('silenceDetection')\n              ? config.silenceDetection\n              : true;\n\n            var lexConfig = config.lexConfig || {};\n            lexConfig.botAlias = lexConfig.hasOwnProperty('botAlias')\n              ? lexConfig.botAlias\n              : DEFAULT_LATEST;\n            lexConfig.botName = lexConfig.hasOwnProperty('botName')\n              ? lexConfig.botName\n              : '';\n            lexConfig.contentType = lexConfig.hasOwnProperty('contentType')\n              ? lexConfig.contentType\n              : DEFAULT_CONTENT_TYPE;\n            lexConfig.userId = lexConfig.hasOwnProperty('userId')\n              ? lexConfig.userId\n              : DEFAULT_USER_ID;\n            lexConfig.accept = lexConfig.hasOwnProperty('accept')\n              ? lexConfig.accept\n              : DEFAULT_ACCEPT_HEADER_VALUE;\n            config.lexConfig = lexConfig;\n\n            return config;\n          };\n        })();\n      },\n      { './control.js': 1 },\n    ],\n    3: [\n      function (require, module, exports) {\n        (function (global) {\n          /**\n           * @module LexAudio\n           * @description The global namespace for Amazon Lex Audio\n           */\n          global.LexAudio = global.LexAudio || {};\n          global.LexAudio.audioControl = require('./control.js').audioControl;\n          global.LexAudio.conversation =\n            require('./conversation.js').conversation;\n          module.exports = global.LexAudio;\n        }.call(\n          this,\n          typeof global !== 'undefined'\n            ? global\n            : typeof self !== 'undefined'\n            ? self\n            : typeof window !== 'undefined'\n            ? window\n            : {}\n        ));\n      },\n      { './control.js': 1, './conversation.js': 2 },\n    ],\n    4: [\n      function (require, module, exports) {\n        var bundleFn = arguments[3];\n        var sources = arguments[4];\n        var cache = arguments[5];\n\n        var stringify = JSON.stringify;\n\n        module.exports = function (fn, options) {\n          var wkey;\n          var cacheKeys = Object.keys(cache);\n\n          for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            var exp = cache[key].exports;\n            // Using babel as a transpiler to use esmodule, the export will always\n            // be an object with the default export as a property of it. To ensure\n            // the existing api and babel esmodule exports are both supported we\n            // check for both\n            if (exp === fn || (exp && exp.default === fn)) {\n              wkey = key;\n              break;\n            }\n          }\n\n          if (!wkey) {\n            wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n            var wcache = {};\n            for (var i = 0, l = cacheKeys.length; i < l; i++) {\n              var key = cacheKeys[i];\n              wcache[key] = key;\n            }\n            sources[wkey] = [\n              Function(['require', 'module', 'exports'], '(' + fn + ')(self)'),\n              wcache,\n            ];\n          }\n          var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n          var scache = {};\n          scache[wkey] = wkey;\n          sources[skey] = [\n            Function(\n              ['require'],\n              // try to call default if defined to also support babel esmodule\n              // exports\n              'var f = require(' +\n                stringify(wkey) +\n                ');' +\n                '(f.default ? f.default : f)(self);'\n            ),\n            scache,\n          ];\n\n          var workerSources = {};\n          resolveSources(skey);\n\n          function resolveSources(key) {\n            workerSources[key] = true;\n\n            for (var depPath in sources[key][1]) {\n              var depKey = sources[key][1][depPath];\n              if (!workerSources[depKey]) {\n                resolveSources(depKey);\n              }\n            }\n          }\n\n          var src =\n            '(' +\n            bundleFn +\n            ')({' +\n            Object.keys(workerSources)\n              .map(function (key) {\n                return (\n                  stringify(key) +\n                  ':[' +\n                  sources[key][0] +\n                  ',' +\n                  stringify(sources[key][1]) +\n                  ']'\n                );\n              })\n              .join(',') +\n            '},{},[' +\n            stringify(skey) +\n            '])';\n          var URL =\n            window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n          var blob = new Blob([src], { type: 'text/javascript' });\n          if (options && options.bare) {\n            return blob;\n          }\n          var workerUrl = URL.createObjectURL(blob);\n          var worker = new Worker(workerUrl);\n          worker.objectURL = workerUrl;\n          return worker;\n        };\n      },\n      {},\n    ],\n    5: [\n      function (require, module, exports) {\n        (function () {\n          'use strict';\n          var work = require('webworkify');\n          var worker = work(require('./worker.js'));\n          var audio_context, audio_stream;\n\n          /**\n           * The Recorder object. Sets up the onaudioprocess callback and communicates\n           * with the web worker to perform audio actions.\n           */\n          var recorder = function (source, silenceDetectionConfig) {\n            silenceDetectionConfig = silenceDetectionConfig || {};\n            silenceDetectionConfig.time = silenceDetectionConfig.hasOwnProperty(\n              'time'\n            )\n              ? silenceDetectionConfig.time\n              : 1500;\n            silenceDetectionConfig.amplitude =\n              silenceDetectionConfig.hasOwnProperty('amplitude')\n                ? silenceDetectionConfig.amplitude\n                : 0.2;\n\n            var recording = false,\n              currCallback,\n              start,\n              silenceCallback,\n              visualizationCallback;\n\n            // Create a ScriptProcessorNode with a bufferSize of 4096 and a single input and output channel\n            var node = source.context.createScriptProcessor(4096, 1, 1);\n\n            worker.onmessage = function (message) {\n              var blob = message.data;\n              currCallback(blob);\n            };\n\n            worker.postMessage({\n              command: 'init',\n              config: {\n                sampleRate: source.context.sampleRate,\n              },\n            });\n\n            /**\n             * Sets the silence and viz callbacks, resets the silence start time, and sets recording to true.\n             * @param {?onSilenceCallback} onSilence - Called when silence is detected.\n             * @param {?visualizerCallback} visualizer - Can be used to visualize the captured buffer.\n             */\n            var record = function (onSilence, visualizer) {\n              silenceCallback = onSilence;\n              visualizationCallback = visualizer;\n              start = Date.now();\n              recording = true;\n            };\n\n            /**\n             * Sets recording to false.\n             */\n            var stop = function () {\n              recording = false;\n            };\n\n            /**\n             * Posts \"clear\" message to the worker.\n             */\n            var clear = function () {\n              stop();\n              worker.postMessage({ command: 'clear' });\n            };\n\n            /**\n             * Sets the export callback and posts an \"export\" message to the worker.\n             * @param {onExportComplete} callback - Called when the export is complete.\n             * @param {sampleRate} The sample rate to use in the export.\n             */\n            var exportWAV = function (callback, sampleRate) {\n              currCallback = callback;\n              worker.postMessage({\n                command: 'export',\n                sampleRate: sampleRate,\n              });\n            };\n\n            /**\n             * Checks the time domain data to see if the amplitude of the audio waveform is more than\n             * the silence threshold. If it is, \"noise\" has been detected and it resets the start time.\n             * If the elapsed time reaches the time threshold the silence callback is called. If there is a\n             * visualizationCallback it invokes the visualization callback with the time domain data.\n             */\n            var analyse = function () {\n              analyser.fftSize = 2048;\n              var bufferLength = analyser.fftSize;\n              var dataArray = new Uint8Array(bufferLength);\n              var amplitude = silenceDetectionConfig.amplitude;\n              var time = silenceDetectionConfig.time;\n\n              analyser.getByteTimeDomainData(dataArray);\n\n              if (typeof visualizationCallback === 'function') {\n                visualizationCallback(dataArray, bufferLength);\n              }\n\n              for (var i = 0; i < bufferLength; i++) {\n                // Normalize between -1 and 1.\n                var curr_value_time = dataArray[i] / 128 - 1.0;\n                if (\n                  curr_value_time > amplitude ||\n                  curr_value_time < -1 * amplitude\n                ) {\n                  start = Date.now();\n                }\n              }\n              var newtime = Date.now();\n              var elapsedTime = newtime - start;\n              if (elapsedTime > time) {\n                silenceCallback();\n              }\n            };\n\n            /**\n             * The onaudioprocess event handler of the ScriptProcessorNode interface. It is the EventHandler to be\n             * called for the audioprocess event that is dispatched to ScriptProcessorNode node types.\n             * @param {AudioProcessingEvent} audioProcessingEvent - The audio processing event.\n             */\n            node.onaudioprocess = function (audioProcessingEvent) {\n              if (!recording) {\n                return;\n              }\n              worker.postMessage({\n                command: 'record',\n                buffer: [audioProcessingEvent.inputBuffer.getChannelData(0)],\n              });\n              analyse();\n            };\n\n            var analyser = source.context.createAnalyser();\n            analyser.minDecibels = -90;\n            analyser.maxDecibels = -10;\n            analyser.smoothingTimeConstant = 0.85;\n\n            source.connect(analyser);\n            analyser.connect(node);\n            node.connect(source.context.destination);\n\n            return {\n              record: record,\n              stop: stop,\n              clear: clear,\n              exportWAV: exportWAV,\n            };\n          };\n\n          /**\n           * Audio recorder object. Handles setting up the audio context,\n           * accessing the mike, and creating the Recorder object.\n           */\n          exports.audioRecorder = function () {\n            /**\n             * Creates an audio context and calls getUserMedia to request the mic (audio).\n             */\n            var requestDevice = function () {\n              if (typeof audio_context === 'undefined') {\n                window.AudioContext =\n                  window.AudioContext || window.webkitAudioContext;\n                audio_context = new AudioContext();\n              }\n\n              return navigator.mediaDevices\n                .getUserMedia({ audio: true })\n                .then(function (stream) {\n                  audio_stream = stream;\n                });\n            };\n\n            var createRecorder = function (silenceDetectionConfig) {\n              return recorder(\n                audio_context.createMediaStreamSource(audio_stream),\n                silenceDetectionConfig\n              );\n            };\n\n            var audioContext = function () {\n              return audio_context;\n            };\n\n            return {\n              requestDevice: requestDevice,\n              createRecorder: createRecorder,\n              audioContext: audioContext,\n            };\n          };\n        })();\n      },\n      { './worker.js': 6, webworkify: 4 },\n    ],\n    6: [\n      function (require, module, exports) {\n        module.exports = function (self) {\n          'use strict';\n          var recLength = 0,\n            recBuffer = [],\n            recordSampleRate;\n\n          self.addEventListener('message', function (e) {\n            switch (e.data.command) {\n              case 'init':\n                init(e.data.config);\n                break;\n              case 'record':\n                record(e.data.buffer);\n                break;\n              case 'export':\n                exportBuffer(e.data.sampleRate);\n                break;\n              case 'clear':\n                clear();\n                break;\n            }\n          });\n\n          function init(config) {\n            recordSampleRate = config.sampleRate;\n          }\n\n          function record(inputBuffer) {\n            recBuffer.push(inputBuffer[0]);\n            recLength += inputBuffer[0].length;\n          }\n\n          function exportBuffer(exportSampleRate) {\n            var mergedBuffers = mergeBuffers(recBuffer, recLength);\n            var downsampledBuffer = downsampleBuffer(\n              mergedBuffers,\n              exportSampleRate\n            );\n            var encodedWav = encodeWAV(downsampledBuffer);\n            var audioBlob = new Blob([encodedWav], {\n              type: 'application/octet-stream',\n            });\n            postMessage(audioBlob);\n          }\n\n          function clear() {\n            recLength = 0;\n            recBuffer = [];\n          }\n\n          function downsampleBuffer(buffer, exportSampleRate) {\n            if (exportSampleRate === recordSampleRate) {\n              return buffer;\n            }\n            var sampleRateRatio = recordSampleRate / exportSampleRate;\n            var newLength = Math.round(buffer.length / sampleRateRatio);\n            var result = new Float32Array(newLength);\n            var offsetResult = 0;\n            var offsetBuffer = 0;\n            while (offsetResult < result.length) {\n              var nextOffsetBuffer = Math.round(\n                (offsetResult + 1) * sampleRateRatio\n              );\n              var accum = 0,\n                count = 0;\n              for (\n                var i = offsetBuffer;\n                i < nextOffsetBuffer && i < buffer.length;\n                i++\n              ) {\n                accum += buffer[i];\n                count++;\n              }\n              result[offsetResult] = accum / count;\n              offsetResult++;\n              offsetBuffer = nextOffsetBuffer;\n            }\n            return result;\n          }\n\n          function mergeBuffers(bufferArray, recLength) {\n            var result = new Float32Array(recLength);\n            var offset = 0;\n            for (var i = 0; i < bufferArray.length; i++) {\n              result.set(bufferArray[i], offset);\n              offset += bufferArray[i].length;\n            }\n            return result;\n          }\n\n          function floatTo16BitPCM(output, offset, input) {\n            for (var i = 0; i < input.length; i++, offset += 2) {\n              var s = Math.max(-1, Math.min(1, input[i]));\n              output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n            }\n          }\n\n          function writeString(view, offset, string) {\n            for (var i = 0; i < string.length; i++) {\n              view.setUint8(offset + i, string.charCodeAt(i));\n            }\n          }\n\n          function encodeWAV(samples) {\n            var buffer = new ArrayBuffer(44 + samples.length * 2);\n            var view = new DataView(buffer);\n\n            writeString(view, 0, 'RIFF');\n            view.setUint32(4, 32 + samples.length * 2, true);\n            writeString(view, 8, 'WAVE');\n            writeString(view, 12, 'fmt ');\n            view.setUint32(16, 16, true);\n            view.setUint16(20, 1, true);\n            view.setUint16(22, 1, true);\n            view.setUint32(24, recordSampleRate, true);\n            view.setUint32(28, recordSampleRate * 2, true);\n            view.setUint16(32, 2, true);\n            view.setUint16(34, 16, true);\n            writeString(view, 36, 'data');\n            view.setUint32(40, samples.length * 2, true);\n            floatTo16BitPCM(view, 44, samples);\n\n            return view;\n          }\n        };\n      },\n      {},\n    ],\n  },\n  {},\n  [3]\n);\n"]}